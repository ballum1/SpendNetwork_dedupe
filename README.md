### Description of folders and files

## record_linkage - 	contains scripts and settings for 1 to 1 dedupe matching between two different csv files.
						Currently set up to match between a csv of unmatched supplier strings from usm3 and a csv of suppleirs from the supplier table

spend_network_linkage_example.py contains the script to carry out the matching.

data_matching_learned_settings and data_matching_training.json contain the model settings for the trained matcher.

output_cleanup.py is a seaparate script to clean up the output csvs generated by spend_network_linkage_example.py

spend_network_linkage_example.py requires two csvs to run with a matching field name, and generates an output csv with the results.
I have not included the csvs here (and have set git to ignore them) so as not to make them visible to the public.
However I have saved all of the csvs that I used in the SpendNetwork basecamp (and given some thoughts on the results). 
					
Csv samples (e.g. beginning "AB") can be obtained from the DB using the following SQL queries:

SELECT
  supplier_name AS sss,
  supplier_id,
  addr_postcode
FROM public.supplier WHERE (supplier_name LIKE 'AB%') AND (supplier_id IS NOT NULL);

SELECT
  sss
FROM public.usm3
WHERE (sss LIKE 'AB%') AND (sid IS NULL);

# notes:
- The matcher has been trained by me giving manual inputs of roughly 40 positive and negative pair matches using the AB sample datasets.
If you want to see how this training works then removing the settings and json files (or changing their paths) will commence training of a new model when spend_network_linkage_example.py is run
- Dedupe will only work if two field names in the two csvs are the same (currently using "sss" as supplier name)



## single_file_cluster -	contains scripts, settings for deduplicating (clustering) a single file (e.g. a list of unmatched suppliers)

The deduplicator has been trained using manual inputs of roughly 40 positive and negative matches from a 10k sample of usm3.
Running on roughly 10k rows took me a few minutes. Running on the entirety of usm3 took several hours.




### Setup (from dedupe repo)
We recommend using [virtualenv](http://virtualenv.readthedocs.org/en/latest/virtualenv.html) and [virtualenvwrapper](http://virtualenvwrapper.readthedocs.org/en/latest/install.html) for working in a virtualized development environment. [Read how to set up virtualenv](http://docs.python-guide.org/en/latest/dev/virtualenvs/).

Once you have virtualenvwrapper set up,

```bash
mkvirtualenv dedupe-examples
pip install -r requirements.txt
```